import React, { useState } from "react";
import styles from "./Acervo.module.css";

// Imagens do acervo
import livro1 from "../../assets/livro1.png";
import livro2 from "../../assets/livro2.png";
import livro3 from "../../assets/livro3.png";
import catalogo3 from "../../assets/catalogo3.png";
import catalogo4 from "../../assets/catalogo4.png";
import catalogo5 from "../../assets/catalogo5.png";
import catalogo6 from "../../assets/catalogo6.png";
import catalogo7 from "../../assets/catalogo7.png";
import catalogo8 from "../../assets/catalogo8.png";
import catalogo9 from "../../assets/catalogo9.png";
import catalogo10 from "../../assets/catalogo10.png";
import catalogo11 from "../../assets/catalogo11.png";
import catalogo12 from "../../assets/catalogo12.png";
import catalogo13 from "../../assets/catalogo13.png";
import catalogo14 from "../../assets/catalogo14.png";

interface Book {
  id: number;
  title: string;
  author: string;
  year: number;
  cover: string;
  color: string;
}

const Acervo: React.FC = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [genre, setGenre] = useState("");
  const [publisher, setPublisher] = useState("");

  // Mock de livros para o acordeon "Novidades da semana"
  const featuredBooks: Book[] = [
    {
      id: 1,
      title: "A CABEÇA DO SANTO",
      author: "Socorro Acioli",
      year: 2014,
      cover: livro1,
      color: "#FFD700",
    },
    {
      id: 2,
      title: "A BIBLIOTECA DA MEIA-NOITE",
      author: "Matt Haig",
      year: 2020,
      cover: catalogo3,
      color: "#2E7D32",
    },
    {
      id: 3,
      title: "CANÇÃO PARA NINAR MENINO GRANDE",
      author: "Autor",
      year: 2021,
      cover: catalogo5,
      color: "#8D6E63",
    },
    {
      id: 4,
      title: "ORAÇÃO PARA DESAPARECER",
      author: "Autor",
      year: 2022,
      cover: livro2,
      color: "#4FC3F7",
    },
  ];

  // Mock de livros para o catálogo
  // Usar um conjunto de imagens da pasta assets (vai ciclar se houver menos imagens que livros)
  const images = [
    livro1,
    livro2,
    livro3,
    catalogo3,
    catalogo4,
    catalogo5,
    catalogo6,
    catalogo7,
    catalogo8,
    catalogo9,
    catalogo10,
    catalogo11,
    catalogo12,
    catalogo13,
    catalogo14,
  ];

  const catalogTitles = [
    "A CABEÇA DO SANTO",
    "ORAÇÃO PARA DESAPARECER",
    "A BIBLIOTECA DA MEIA-NOITE",
    "YUUUNA",
    "CANÇÃO PARA NINAR MENINO GRANDE",
    "TRÊS",
    "A MULHER QUE MATOU OS PEIXES",
    "GAROTA, MULHER, OUTRAS",
    "TAYLOR JENKINS REID",
    "AMORES VERDADEIROS",
    "DAISY JONES",
    "TORTO ARADO",
    "MULHERES",
    "A PIOR PESSOA DO MUNDO",
    "VIOLA DAVIS",
  ];

  const catalogBooks: Book[] = catalogTitles.map((title, idx) => ({
    id: idx + 1,
    title,
    author: idx % 2 === 0 ? "Autor" : "Vários",
    year: 2019 + (idx % 6),
    cover: images[idx % images.length],
    color: "#EAEAEA",
  }));

  return (
    <div className={styles.acervo}>
      {/* Seção 1: Novidades da semana - Acordeon */}
      <section className={styles.featuredSection}>
        <h2 className={styles.sectionTitle}>Novidades da semana</h2>

        <div className={styles.accordion}>
          {/* Livro principal expandido */}
          <div className={styles.mainBook}>
            <img
              src={featuredBooks[0].cover}
              alt={featuredBooks[0].title}
              className={styles.mainBookImage}
            />
            <button className={styles.expandBtn} aria-label="Expandir">
                <svg width="43" height="43" viewBox="0 0 43 43" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21.2534 3.32088C17.7066 3.32088 14.2396 4.37261 11.2906 6.34307C8.34158 8.31352 6.04312 11.1142 4.68584 14.391C3.32857 17.6677 2.97345 21.2733 3.66538 24.7519C4.35731 28.2305 6.06522 31.4258 8.57314 33.9337C11.081 36.4416 14.2763 38.1495 17.7549 38.8414C21.2335 39.5334 24.8391 39.1782 28.1159 37.821C31.3926 36.4637 34.1933 34.1652 36.1638 31.2162C38.1342 28.2673 39.1859 24.8002 39.1859 21.2534C39.1807 16.4991 37.2896 11.9409 33.9278 8.57904C30.5659 5.21717 26.0078 3.32616 21.2534 3.32088ZM21.2534 35.201C18.4948 35.201 15.7982 34.383 13.5045 32.8504C11.2109 31.3178 9.42317 29.1395 8.36752 26.5909C7.31186 24.0424 7.03565 21.238 7.57382 18.5324C8.11199 15.8269 9.44037 13.3416 11.391 11.391C13.3416 9.44044 15.8268 8.11207 18.5323 7.5739C21.2379 7.03573 24.0423 7.31194 26.5909 8.36759C29.1394 9.42325 31.3178 11.2109 32.8503 13.5046C34.3829 15.7983 35.2009 18.4949 35.2009 21.2534C35.197 24.9514 33.7262 28.4967 31.1114 31.1115C28.4966 33.7263 24.9513 35.197 21.2534 35.201ZM29.3048 19.8438C29.4905 20.0289 29.6379 20.2488 29.7385 20.491C29.839 20.7332 29.8908 20.9929 29.8908 21.2551C29.8908 21.5173 29.839 21.777 29.7385 22.0192C29.6379 22.2614 29.4905 22.4814 29.3048 22.6665L23.9914 27.9798C23.8061 28.1652 23.586 28.3122 23.3439 28.4125C23.1017 28.5128 22.8422 28.5644 22.58 28.5644C22.3179 28.5644 22.0584 28.5128 21.8162 28.4125C21.5741 28.3122 21.354 28.1652 21.1687 27.9798C20.9833 27.7945 20.8363 27.5744 20.736 27.3323C20.6357 27.0901 20.5841 26.8306 20.5841 26.5685C20.5841 26.3063 20.6357 26.0468 20.736 25.8046C20.8363 25.5625 20.9833 25.3424 21.1687 25.1571L23.0798 23.246H14.6117C14.0832 23.246 13.5764 23.036 13.2028 22.6624C12.8291 22.2887 12.6192 21.7819 12.6192 21.2534C12.6192 20.725 12.8291 20.2182 13.2028 19.8445C13.5764 19.4709 14.0832 19.2609 14.6117 19.2609H23.0798L21.167 17.3498C20.9817 17.1645 20.8347 16.9444 20.7344 16.7023C20.6341 16.4601 20.5824 16.2005 20.5824 15.9384C20.5824 15.6763 20.6341 15.4168 20.7344 15.1746C20.8347 14.9325 20.9817 14.7124 21.167 14.5271C21.3524 14.3417 21.5724 14.1947 21.8146 14.0944C22.0567 13.9941 22.3163 13.9425 22.5784 13.9425C22.8405 13.9425 23.1 13.9941 23.3422 14.0944C23.5844 14.1947 23.8044 14.3417 23.9897 14.5271L29.3048 19.8438Z" fill="#393939"/>
                </svg>
            </button>
          </div>

          {/* Fatias dos outros livros (vertical no mobile, horizontal no desktop) */}
          <div className={styles.bookSlices}>
            {featuredBooks.slice(1).map((book) => (
              <div key={book.id} className={styles.bookSlice}>
                <img
                  src={book.cover}
                  alt={book.title}
                  className={styles.sliceImage}
                />
                <button
                  className={styles.sliceExpandBtn}
                  aria-label={`Ver ${book.title}`}
                >
                    <svg width="43" height="43" viewBox="0 0 43 43" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.2534 3.32088C17.7066 3.32088 14.2396 4.37261 11.2906 6.34307C8.34158 8.31352 6.04312 11.1142 4.68584 14.391C3.32857 17.6677 2.97345 21.2733 3.66538 24.7519C4.35731 28.2305 6.06522 31.4258 8.57314 33.9337C11.081 36.4416 14.2763 38.1495 17.7549 38.8414C21.2335 39.5334 24.8391 39.1782 28.1159 37.821C31.3926 36.4637 34.1933 34.1652 36.1638 31.2162C38.1342 28.2673 39.1859 24.8002 39.1859 21.2534C39.1807 16.4991 37.2896 11.9409 33.9278 8.57904C30.5659 5.21717 26.0078 3.32616 21.2534 3.32088ZM21.2534 35.201C18.4948 35.201 15.7982 34.383 13.5045 32.8504C11.2109 31.3178 9.42317 29.1395 8.36752 26.5909C7.31186 24.0424 7.03565 21.238 7.57382 18.5324C8.11199 15.8269 9.44037 13.3416 11.391 11.391C13.3416 9.44044 15.8268 8.11207 18.5323 7.5739C21.2379 7.03573 24.0423 7.31194 26.5909 8.36759C29.1394 9.42325 31.3178 11.2109 32.8503 13.5046C34.3829 15.7983 35.2009 18.4949 35.2009 21.2534C35.197 24.9514 33.7262 28.4967 31.1114 31.1115C28.4966 33.7263 24.9513 35.197 21.2534 35.201ZM29.3048 19.8438C29.4905 20.0289 29.6379 20.2488 29.7385 20.491C29.839 20.7332 29.8908 20.9929 29.8908 21.2551C29.8908 21.5173 29.839 21.777 29.7385 22.0192C29.6379 22.2614 29.4905 22.4814 29.3048 22.6665L23.9914 27.9798C23.8061 28.1652 23.586 28.3122 23.3439 28.4125C23.1017 28.5128 22.8422 28.5644 22.58 28.5644C22.3179 28.5644 22.0584 28.5128 21.8162 28.4125C21.5741 28.3122 21.354 28.1652 21.1687 27.9798C20.9833 27.7945 20.8363 27.5744 20.736 27.3323C20.6357 27.0901 20.5841 26.8306 20.5841 26.5685C20.5841 26.3063 20.6357 26.0468 20.736 25.8046C20.8363 25.5625 20.9833 25.3424 21.1687 25.1571L23.0798 23.246H14.6117C14.0832 23.246 13.5764 23.036 13.2028 22.6624C12.8291 22.2887 12.6192 21.7819 12.6192 21.2534C12.6192 20.725 12.8291 20.2182 13.2028 19.8445C13.5764 19.4709 14.0832 19.2609 14.6117 19.2609H23.0798L21.167 17.3498C20.9817 17.1645 20.8347 16.9444 20.7344 16.7023C20.6341 16.4601 20.5824 16.2005 20.5824 15.9384C20.5824 15.6763 20.6341 15.4168 20.7344 15.1746C20.8347 14.9325 20.9817 14.7124 21.167 14.5271C21.3524 14.3417 21.5724 14.1947 21.8146 14.0944C22.0567 13.9941 22.3163 13.9425 22.5784 13.9425C22.8405 13.9425 23.1 13.9941 23.3422 14.0944C23.5844 14.1947 23.8044 14.3417 23.9897 14.5271L29.3048 19.8438Z" fill="#ffffffff"/>
                    </svg>
                </button>
              </div>
            ))}
          </div>
        </div>

        <div className={styles.bookInfo}>
          <h3>{featuredBooks[0].title}</h3>
          <p>
            {featuredBooks[0].author} - {featuredBooks[0].year}
          </p>
        </div>
      </section>

      {/* Seção 2: Veja nosso catálogo - Filtros e Busca */}
      <section className={styles.catalogSection}>
        <h2 className={styles.sectionTitle}>Veja nosso catálogo</h2>

        <div className={styles.searchContainer}>
          <div className={styles.searchBar}>
            <input
              type="text"
              placeholder="Fazer busca"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className={styles.searchInput}
            />
            <button className={styles.searchIconBtn} aria-label="Buscar">
              <svg width="21" height="21" viewBox="0 0 21 21" fill="none">
                <path
                  d="M19.9399 18.348L15.4877 13.8939C16.8226 12.1544 17.4458 9.97216 17.2309 7.78998C17.0161 5.60781 15.9792 3.58907 14.3306 2.14328C12.6821 0.697486 10.5453 -0.0670986 8.35376 0.00462578C6.16221 0.0763502 4.07999 0.979013 2.5295 2.5295C0.979013 4.07999 0.0763502 6.16221 0.00462578 8.35376C-0.0670986 10.5453 0.697486 12.6821 2.14328 14.3306C3.58907 15.9792 5.60781 17.0161 7.78998 17.2309C9.97216 17.4458 12.1544 16.8226 13.8939 15.4877L18.3499 19.9445C18.4545 20.0492 18.5787 20.1322 18.7155 20.1888C18.8522 20.2455 18.9987 20.2746 19.1467 20.2746C19.2947 20.2746 19.4413 20.2455 19.578 20.1888C19.7147 20.1322 19.839 20.0492 19.9436 19.9445C20.0482 19.8399 20.1313 19.7157 20.1879 19.5789C20.2445 19.4422 20.2737 19.2957 20.2737 19.1477C20.2737 18.9997 20.2445 18.8531 20.1879 18.7164C20.1313 18.5797 20.0482 18.4554 19.9436 18.3508L19.9399 18.348ZM2.26891 8.64392C2.26891 7.38306 2.6428 6.15052 3.3433 5.10215C4.04379 4.05379 5.03943 3.23669 6.20431 2.75418C7.36919 2.27167 8.65099 2.14543 9.88762 2.39141C11.1242 2.63739 12.2602 3.24455 13.1517 4.13611C14.0433 5.02767 14.6504 6.16359 14.8964 7.40021C15.1424 8.63684 15.0162 9.91864 14.5336 11.0835C14.0511 12.2484 13.234 13.244 12.1857 13.9445C11.1373 14.645 9.90477 15.0189 8.64392 15.0189C6.95369 15.0172 5.3332 14.345 4.13803 13.1498C2.94286 11.9546 2.27065 10.3341 2.26891 8.64392Z"
                  fill="white"
                />
              </svg>
            </button>
          </div>

          {/* Botão de filtro (mobile) */}
          <button className={styles.filterBtn} aria-label="Filtros">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path
                d="M3 6h18M7 12h10M10 18h4"
                stroke="white"
                strokeWidth="2"
                strokeLinecap="round"
              />
            </svg>
          </button>

          {/* Dropdowns e Buscar (desktop) */}
          <div className={styles.desktopFilters}>
            <select
              value={genre}
              onChange={(e) => setGenre(e.target.value)}
              className={styles.filterSelect}
            >
              <option value="">Gênero</option>
              <option value="ficcao">Ficção</option>
              <option value="romance">Romance</option>
              <option value="biografia">Biografia</option>
            </select>

            <select
              value={publisher}
              onChange={(e) => setPublisher(e.target.value)}
              className={styles.filterSelect}
            >
              <option value="">Editora</option>
              <option value="companhia">Companhia das Letras</option>
              <option value="record">Record</option>
              <option value="globo">Globo Livros</option>
            </select>

            <button className={styles.searchBtn}>
              <svg width="21" height="21" viewBox="0 0 21 21" fill="none">
                <path
                  d="M19.9399 18.348L15.4877 13.8939C16.8226 12.1544 17.4458 9.97216 17.2309 7.78998C17.0161 5.60781 15.9792 3.58907 14.3306 2.14328C12.6821 0.697486 10.5453 -0.0670986 8.35376 0.00462578C6.16221 0.0763502 4.07999 0.979013 2.5295 2.5295C0.979013 4.07999 0.0763502 6.16221 0.00462578 8.35376C-0.0670986 10.5453 0.697486 12.6821 2.14328 14.3306C3.58907 15.9792 5.60781 17.0161 7.78998 17.2309C9.97216 17.4458 12.1544 16.8226 13.8939 15.4877L18.3499 19.9445C18.4545 20.0492 18.5787 20.1322 18.7155 20.1888C18.8522 20.2455 18.9987 20.2746 19.1467 20.2746C19.2947 20.2746 19.4413 20.2455 19.578 20.1888C19.7147 20.1322 19.839 20.0492 19.9436 19.9445C20.0482 19.8399 20.1313 19.7157 20.1879 19.5789C20.2445 19.4422 20.2737 19.2957 20.2737 19.1477C20.2737 18.9997 20.2445 18.8531 20.1879 18.7164C20.1313 18.5797 20.0482 18.4554 19.9436 18.3508L19.9399 18.348ZM2.26891 8.64392C2.26891 7.38306 2.6428 6.15052 3.3433 5.10215C4.04379 4.05379 5.03943 3.23669 6.20431 2.75418C7.36919 2.27167 8.65099 2.14543 9.88762 2.39141C11.1242 2.63739 12.2602 3.24455 13.1517 4.13611C14.0433 5.02767 14.6504 6.16359 14.8964 7.40021C15.1424 8.63684 15.0162 9.91864 14.5336 11.0835C14.0511 12.2484 13.234 13.244 12.1857 13.9445C11.1373 14.645 9.90477 15.0189 8.64392 15.0189C6.95369 15.0172 5.3332 14.345 4.13803 13.1498C2.94286 11.9546 2.27065 10.3341 2.26891 8.64392Z"
                  fill="white"
                />
              </svg>
              Buscar
            </button>
          </div>
        </div>

        {/* Seção 3: Grid de Livros */}
        <div className={styles.booksGrid}>
          {catalogBooks.map((book) => (
            <div key={book.id} className={styles.bookCard}>
              <img
                src={book.cover}
                alt={book.title}
                className={styles.bookCardImage}
              />
            </div>
          ))}
        </div>

        {/* Botão flutuante + (mobile) */}
        <button className={styles.floatingBtn} aria-label="Ver mais livros">
          <svg width="24" height="24" viewBox="0 0 19 19" fill="none">
            <path
              d="M18.75 9.375C18.75 9.67337 18.6315 9.95952 18.4205 10.1705C18.2095 10.3815 17.9234 10.5 17.625 10.5H10.5V17.625C10.5 17.9234 10.3815 18.2095 10.1705 18.4205C9.95952 18.6315 9.67337 18.75 9.375 18.75C9.07663 18.75 8.79048 18.6315 8.5795 18.4205C8.36853 18.2095 8.25 17.9234 8.25 17.625V10.5H1.125C0.826631 10.5 0.540483 10.3815 0.329505 10.1705C0.118526 9.95952 0 9.67337 0 9.375C0 9.07663 0.118526 8.79048 0.329505 8.5795C0.540483 8.36853 0.826631 8.25 1.125 8.25H8.25V1.125C8.25 0.826631 8.36853 0.540483 8.5795 0.329505C8.79048 0.118526 9.07663 0 9.375 0C9.67337 0 9.95952 0.118526 10.1705 0.329505C10.3815 0.540483 10.5 0.826631 10.5 1.125V8.25H17.625C17.9234 8.25 18.2095 8.36853 18.4205 8.5795C18.6315 8.79048 18.75 9.07663 18.75 9.375Z"
              fill="white"
            />
          </svg>
        </button>

        {/* Seção 4: Paginação */}
        <div className={styles.pagination}>
          <button className={styles.paginationArrow} aria-label="Página anterior">
            <svg width="38" height="38" viewBox="0 0 38 38" fill="none">
              <path d="M8.30517e-07 19C6.66256e-07 15.2422 1.11433 11.5687 3.20208 8.44417C5.28982 5.31964 8.25722 2.88436 11.729 1.4463C15.2008 0.00823174 19.0211 -0.368032 22.7067 0.365087C26.3924 1.09821 29.7778 2.90778 32.435 5.56498C35.0922 8.22217 36.9018 11.6077 37.6349 15.2933C38.368 18.9789 37.9918 22.7992 36.5537 26.271C35.1156 29.7428 32.6804 32.7102 29.5558 34.7979C26.4313 36.8857 22.7578 38 19 38C13.9625 37.9947 9.13288 35.9912 5.57085 32.4292C2.00881 28.8671 0.00532072 24.0375 8.30517e-07 19ZM22.9571 27.3417C23.093 27.206 23.2008 27.0448 23.2744 26.8674C23.3479 26.6899 23.3858 26.4998 23.3858 26.3077C23.3858 26.1156 23.3479 25.9254 23.2744 25.748C23.2008 25.5706 23.093 25.4094 22.9571 25.2737L16.6816 19L22.9571 12.7264C23.0929 12.5906 23.2006 12.4294 23.2741 12.2519C23.3476 12.0745 23.3854 11.8844 23.3854 11.6923C23.3854 11.5003 23.3476 11.3101 23.2741 11.1327C23.2006 10.9553 23.0929 10.7941 22.9571 10.6583C22.8213 10.5225 22.6601 10.4148 22.4827 10.3413C22.3053 10.2678 22.1151 10.23 21.9231 10.23C21.731 10.23 21.5409 10.2678 21.3635 10.3413C21.186 10.4148 21.0248 10.5225 20.889 10.6583L13.5813 17.966C13.4455 18.1017 13.3377 18.2629 13.2641 18.4403C13.1906 18.6177 13.1527 18.8079 13.1527 19C13.1527 19.1921 13.1906 19.3823 13.2641 19.5597C13.3377 19.7371 13.4455 19.8983 13.5813 20.034L20.889 27.3417C21.0248 27.4776 21.186 27.5854 21.3634 27.659C21.5408 27.7325 21.731 27.7704 21.9231 27.7704C22.1151 27.7704 22.3053 27.7325 22.4828 27.659C22.6602 27.5854 22.8214 27.4776 22.9571 27.3417Z" fill="#FF83A5"/>
            </svg>
          </button>

          <button className={styles.pageNumber}>1</button>
          <button className={`${styles.pageNumber} ${styles.active}`}>2</button>
          <button className={styles.pageNumber}>3</button>

          <button className={styles.paginationArrow} aria-label="Próxima página">
            <svg width="38" height="38" viewBox="0 0 38 38" fill="none">
              <path d="M38 19C38 15.2422 36.8857 11.5687 34.7979 8.44417C32.7102 5.31964 29.7428 2.88436 26.271 1.4463C22.7992 0.00823174 18.9789 -0.368032 15.2933 0.365087C11.6076 1.09821 8.22217 2.90778 5.56498 5.56498C2.90778 8.22217 1.09821 11.6077 0.365089 15.2933C-0.368031 18.9789 0.00823112 22.7992 1.4463 26.271C2.88436 29.7428 5.31964 32.7102 8.44417 34.7979C11.5687 36.8857 15.2422 38 19 38C24.0375 37.9947 28.8671 35.9912 32.4292 32.4292C35.9912 28.8671 37.9947 24.0375 38 19ZM15.0429 27.3417C14.907 27.206 14.7992 27.0448 14.7256 26.8674C14.6521 26.6899 14.6142 26.4998 14.6142 26.3077C14.6142 26.1156 14.6521 25.9254 14.7256 25.748C14.7992 25.5706 14.907 25.4094 15.0429 25.2737L21.3184 19L15.0429 12.7264C14.9071 12.5906 14.7994 12.4294 14.7259 12.2519C14.6524 12.0745 14.6146 11.8844 14.6146 11.6923C14.6146 11.5003 14.6524 11.3101 14.7259 11.1327C14.7994 10.9553 14.9071 10.7941 15.0429 10.6583C15.1787 10.5225 15.3399 10.4148 15.5173 10.3413C15.6947 10.2678 15.8849 10.23 16.0769 10.23C16.269 10.23 16.4591 10.2678 16.6365 10.3413C16.814 10.4148 16.9752 10.5225 17.111 10.6583L24.4187 17.966C24.5545 18.1017 24.6623 18.2629 24.7359 18.4403C24.8094 18.6177 24.8473 18.8079 24.8473 19C24.8473 19.1921 24.8094 19.3823 24.7359 19.5597C24.6623 19.7371 24.5545 19.8983 24.4187 20.034L17.111 27.3417C16.9752 27.4776 16.814 27.5854 16.6366 27.659C16.4592 27.7325 16.269 27.7704 16.0769 27.7704C15.8849 27.7704 15.6947 27.7325 15.5172 27.659C15.3398 27.5854 15.1786 27.4776 15.0429 27.3417Z" fill="#FF83A5"/>
            </svg>
          </button>
        </div>
      </section>
    </div>
  );
};

export default Acervo;
