import React, { useEffect } from "react";
import styles from "./Toast.module.css";

export type ToastType = "success" | "info";

interface ToastProps {
  message: string;
  type: ToastType;
  duration?: number;
  onClose: () => void;
}

const MessageIcon: React.FC = () => (
  <svg
    width="42"
    height="42"
    viewBox="0 0 36 36"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M16.414 17.6985C16.414 18.2177 16.2601 18.7252 15.9716 19.1569C15.6832 19.5886 15.2732 19.925 14.7936 20.1237C14.3139 20.3224 13.7861 20.3744 13.2769 20.2731C12.7677 20.1718 12.3 19.9218 11.9329 19.5547C11.5658 19.1876 11.3158 18.7198 11.2145 18.2106C11.1132 17.7014 11.1652 17.1736 11.3638 16.694C11.5625 16.2143 11.899 15.8044 12.3307 15.5159C12.7623 15.2275 13.2698 15.0735 13.789 15.0735C14.4852 15.0735 15.1529 15.3501 15.6452 15.8424C16.1375 16.3347 16.414 17.0023 16.414 17.6985ZM21.664 15.0735C21.1448 15.0735 20.6373 15.2275 20.2057 15.5159C19.774 15.8044 19.4375 16.2143 19.2388 16.694C19.0402 17.1736 18.9882 17.7014 19.0895 18.2106C19.1908 18.7198 19.4408 19.1876 19.8079 19.5547C20.175 19.9218 20.6427 20.1718 21.1519 20.2731C21.6611 20.3744 22.1889 20.3224 22.6686 20.1237C23.1482 19.925 23.5582 19.5886 23.8466 19.1569C24.1351 18.7252 24.289 18.2177 24.289 17.6985C24.289 17.0023 24.0125 16.3347 23.5202 15.8424C23.0279 15.3501 22.3602 15.0735 21.664 15.0735ZM35.4453 17.6985C35.4459 20.7336 34.6669 23.718 33.183 26.3656C31.699 29.0132 29.5598 31.2352 26.9705 32.8186C24.3812 34.402 21.4286 35.2938 18.3956 35.4084C15.3627 35.523 12.3512 34.8566 9.64973 33.4731L4.32918 35.2532C3.74998 35.4484 3.12776 35.478 2.53267 35.3385C1.93757 35.1991 1.39325 34.8962 0.961056 34.464C0.528862 34.0318 0.225975 33.4875 0.0865323 32.8924C-0.0529102 32.2973 -0.0233647 31.6751 0.171839 31.0959L1.94535 25.7753C0.727502 23.3898 0.0663131 20.7592 0.011499 18.0814C-0.0433151 15.4035 0.509673 12.7481 1.62888 10.3147C2.7481 7.88136 4.40441 5.73339 6.47328 4.03232C8.54216 2.33125 10.9698 1.12134 13.5736 0.493568C16.1774 -0.134207 18.8896 -0.163511 21.5064 0.407858C24.1231 0.979227 26.5763 2.1364 28.6814 3.79237C30.7866 5.44835 32.4889 7.56002 33.6605 9.96864C34.832 12.3772 35.4422 15.0201 35.4453 17.6985ZM31.5078 17.6985C31.507 15.5846 31.0199 13.4993 30.0842 11.6038C29.1486 9.70825 27.7894 8.05338 26.1118 6.76718C24.4343 5.48098 22.4834 4.59792 20.4099 4.18631C18.3365 3.77471 16.1962 3.8456 14.1546 4.39349C12.1129 4.94138 10.2247 5.95159 8.63595 7.34598C7.04719 8.74036 5.80049 10.4815 4.99229 12.4348C4.1841 14.3881 3.83607 16.5011 3.97513 18.6104C4.11419 20.7197 4.73662 22.7687 5.79426 24.599C5.93405 24.8403 6.02096 25.1086 6.04925 25.3861C6.07753 25.6636 6.04654 25.9439 5.95832 26.2084L4.32918 31.0959L9.2166 29.4667C9.41765 29.3998 9.62813 29.3654 9.84004 29.365C10.1858 29.3656 10.5253 29.4573 10.8244 29.6308C12.9195 30.8431 15.297 31.4822 17.7176 31.4838C20.1382 31.4853 22.5164 30.8493 24.6131 29.6397C26.7098 28.4302 28.4509 26.6897 29.6613 24.5934C30.8716 22.4972 31.5085 20.1191 31.5078 17.6985Z"
      fill="white"
    />
  </svg>
);

export const Toast: React.FC<ToastProps> = ({
  message,
  type,
  duration = 5000,
  onClose,
}) => {
  useEffect(() => {
    const timer = setTimeout(() => {
      onClose();
    }, duration);

    return () => clearTimeout(timer);
  }, [duration, onClose]);

  return (
    <div className={`${styles.toast} ${styles[type]}`}>
      <div className={`${styles.iconContainer} ${styles[type]}`}>
        <div className={styles.icon}>
          <MessageIcon />
        </div>
      </div>
      <p className={`${styles.message} ${styles[type]}`}>{message}</p>
    </div>
  );
};
